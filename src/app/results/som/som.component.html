<div style="display: flex;flex-flow: column wrap;"><som-toolbar></som-toolbar>

<p *ngIf="!(dataSource | async) && !loading" class="background-prompt">No SOM available. Please train one...</p>
    
<p *ngIf="!(dataSource | async) && loading" class="background-prompt">
    <mat-spinner></mat-spinner>
</p>


<div [ngStyle]="{'grid-template-columns': xDim(),'grid-template-rows': yDim(), 'padding-bottom' : _queryService.feedbackSegments.length ? '135px' : '0'}" (scrolled)="incrementCount()" (scrolledUp)="decrementCount()" [fromRoot]="true" [infiniteScrollContainer]="'#scrollable'"
    [infiniteScrollDistance]="1" [infiniteScrollUpDistance]="2" class="mini-gallery"
    infiniteScroll>
<som-result-segment-preview-tile *ngFor="let segment of (dataSource | async)"
    [container]="this" [score]="1" [segment]="segment" overview=true></som-result-segment-preview-tile>
</div>
</div>

<div *ngIf="_queryService.feedbackSegments.length" style="display:flex;background: gray;position: fixed;bottom: 0;left:0;width: 100%;border-top: 15px solid gray;z-index: 200;justify-content: center;">
<div style="display:flex;overflow: scroll;max-width: calc(100% - 600px);">
    <som-result-segment-preview-tile *ngFor="let segment of _queryService.feedbackSegments"
    [container]="this" [score]="1" [segment]="segment"></som-result-segment-preview-tile>
</div>
</div>